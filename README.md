# Intersect - Personalized job matching

Find the job you actually want - using AI.

Access here: https://intersect.streamlit.app

Possible alternative product names: axis, compass, pathway, waypoint

Assignment for the Right Word module at LIS.

1. extract
2. transform
3. generate descriptions
4. generate embeddings

## Tech stack:

-   `uv`: environment and dependency management
-   `streamlit`: web framework (frontend and backend) and hosting
-   `openai` and `cohere`: embedding and rerank models
-   `scrapeops`: scraping proxy
-   `pypdf`: pdf parsing
-   `scikit-learn`: PCA, KMeans
-   `bm25s`: fast BM25 implementation

## TODO

-   mvp
    -   [ ] add clustering viz
        -   show your dot / transform space around your dot
        -   add color to your dot
        -   auto cluster n
-   new features
    -   [ ] openai embedding async
    -   [ ] add download button
    -   [ ] expand database to work in real time. hook up the scraping to the app
    -   [ ] add local semantic search
    -   [ ] add local reranker
    -   [ ] add local llm permutation
    -   [ ] infer keywords and city from the text. do several at once
    -   [ ] add sponsor column by comparing to the ukvi excel spreadsheet
    -   [ ] prepend other cols before embedding
    -   [ ] upgrade database to sqlite
    -   [ ] add reverse mode (employers ordering applicants by relevance)
        -   this would be bad for interdisciplinarians as they would not be ranked very highly.
    -   [ ] add tracking the bluesky firehose for ai jobs
    -   [ ] prompt engineering for the permutation
    -   [ ] permutation: test yaml
-   fix
    -   [ ] add 'x days ago' instead of datetime
    -   [ ] limit reranker to 1000
        -   bm25: fix ocr spacing bugs first
        -   bm25: show title and delta
    -   why is drop duplicates not working
    -   ner
        -   drop keywords, city and uk
        -   why is this so slow
    -   incremental saving so long tasks are not lost

## Explanations

-   OpenAI, Streamlit and Cohere are the fastest ways to make a prototype. This is the same reason there is no need for a vector database or even sqlite.
-   For similarity we can use a dot product because OpenAI embeddings are normalized.
-   _CV-Library_ is used as the data source as it is cited by the [UK Government](https://nationalcareers.service.gov.uk/careers-advice/advertised-job-vacancies).
-   Scraping
    -   Respects robots.txt
    -   just a request doesnt work (403)
    -   request with user agent doesnt work (403)
    -   request with genuine headers doesnt work (403)
    -   request with scrapeops fake headers doesnt work (403)
    -   request with scrapeops proxy works but takes like 20s per request. this is tolerable for this application. scrapeops is free.
-   test cvs generated by chatgpt with the prompt 'generate the perfect cv for this position' get around 0.65 similarity.
-   BM25 is an altered version of TF-IDF that is standard in the industry.
    -   https://www.elastic.co/blog/practical-bm25-part-2-the-bm25-algorithm-and-its-variables
    -   https://docs.llamaindex.ai/en/stable/examples/retrievers/bm25_retriever/
    -   bm25f can weight different parameters as relevant but at this point you are replicating the job board and that is out of scope.
    -   the pdf/text input can be anything that you like. search for a job that is like a song or a poem or something. go nuts
    -   note that the similarity values do not mean much of anything in absolute. see
        -   https://datascience.stackexchange.com/questions/101862/cosine-similarity-between-sentence-embeddings-is-always-positive
        -   https://vaibhavgarg1982.medium.com/why-are-cosine-similarities-of-text-embeddings-almost-always-positive-6bd31eaee4d5
    -   much like llms, embeddings do averages. and so this is going to be generic. if you are trying to do something fancy, you might want to use this in a nonstandard way as well. such as using weird keywords in the search.
    -   biggest issue time-wise is the free proxies. just buy good ones. also less of a security risk.
    -   for a production-grade implementation of this we might want to take a look at https://github.com/AmenRa/retriv
    -   Elastic search setup is a bit more involved so out of scope
    -   why pca and kmeans

bm25 is is an industry standard algorithm for search. bm25 itself is a variation on tfidf. this uses the lucene method as it is the default of the bm25s package.

can also add a reranker after the semantic search

-   cohere rerank
-

measure how much time it takes to use a reranker and ebedding local and remote.

lexical search. sparse vectors
semantic search. dense vectors.

## Job boards

Some info on this [here](https://www.techradar.com/best/uk-job-sites) and [here](https://seemehired.com/blog/the-top-uk-job-boards-and-hiring-platforms-to-find-talent-in-2024/)

Each one of these would need a bespoke scraping strategy.

-   General
    -   [x] CV-Library
    -   [ ] Indeed
    -   [ ] Indeed UK
    -   [ ] Adzuna
    -   [ ] Reed
    -   [ ] Monster
    -   [ ] Totaljobs
    -   [ ] LinkedIn
    -   [ ] Jobserve
    -   [ ] [r/forhire](https://www.reddit.com/r/forhire/)
    -   [ ] https://www.jobsite.co.uk/
    -   [ ] https://www.lhh.com/uk/en/
    -   [ ] https://www.prospects.ac.uk/
    -   [ ] Glassdoor
    -   [ ] CWJobs
    -   [ ] Guardian Jobs
    -   [ ] https://uk.whatjobs.com/
-   Tech
    -   [ ] Technojobs
    -   [ ] Jobserve
    -   [ ] Hackernews
    -   [ ] https://wellfound.com/jobs
    -   [ ] https://weworkremotely.com/
    -   [ ] https://workinstartups.com/
    -   [ ] https://www.haystackapp.io/
    -   [ ] https://wearetechwomen.com/
    -   [ ] https://jobs.revoco-talent.co.uk/jobs.aspx
    -   [ ] https://devitjobs.uk/
    -   [ ] https://www.cwjobs.co.uk/
    -   [ ] https://www.f6s.com/jobs
    -   [ ] [Jora](https://uk.jora.com/)
    -   [ ] https://remotejobs.careers/job-location/uk/
-   Responsible Tech
    -   [ ] [All Tech Is Human](https://alltechishuman.org/responsible-tech-job-board)
    -   [ ] [Ethical Tech Job Resources](https://docs.google.com/spreadsheets/d/1dFVoF6f9VU5pjaGhyyvQaBN0n6ae-iLCtlvsO1N2jhA/edit?gid=0#gid=0)
    -   [ ] https://techjobsforgood.com/
    -   [ ] [80000h](https://jobs.80000hours.org/)
